<h2 mat-dialog-title>Generate table of contents from publications</h2>

<mat-dialog-content>
  <p>This action will create a new, flat table of contents from all publications in the collection. Below you can select how you want the items in the generated table of contents to be ordered, and which item fields you want to populate with data from the publications.</p>

  <mat-form-field class="select-sort-order">
    <mat-label>Order items by publication</mat-label>
    <mat-select [(ngModel)]="selectedSortOption">
      @for (option of sortOptions; track option.key) {
        <mat-option [value]="option.key">
          {{ option.label }}
        </mat-option>
      }
    </mat-select>
  </mat-form-field>

  @if (fields.length > 0) {
    <div class="toggle-fields">
      <h3>Select fields to populate with publication data (the text field, from the publication name, is always populated):</h3>
      @for (field of fields; track field.key) {
        <mat-slide-toggle 
          [(ngModel)]="selectedFields[field.key]" 
        >
          {{ field.label }}
        </mat-slide-toggle>
      }
    </div>
  }
</mat-dialog-content>

<mat-dialog-actions>
  <button matButton [matDialogClose]="{value: false}">Cancel</button>
  <button matButton="filled"
        [matDialogClose]="{value: true, selectedSortOption, selectedFields}"
  >
    Generate
  </button>
</mat-dialog-actions>
