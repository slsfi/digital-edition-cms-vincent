
<style>
</style>

<main class="main">
  <mat-toolbar [class.center]="(isAuthenticated$ | async) === false">
    <ng-container *ngIf="(isAuthenticated$ | async) === true">
      <button mat-icon-button class="example-icon" aria-label="Example icon-button with menu icon"  (click)="drawer.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
    </ng-container>
    <h1 class="title">Vincent â€“ CMS for the SLS Digital Edition Platform</h1>
    <ng-container *ngIf="selectedProject$ | async as selectedProject">
      <h4 class="title" *ngIf="selectedProject">Project: {{selectedProject}}</h4>
    </ng-container>
  </mat-toolbar>
  <mat-drawer-container class="drawer">
    <mat-drawer #drawer mode="over">
      <div class="menu">
        <ng-container *ngIf="availableProjects$ | async as availableProjects">
          <mat-form-field>
            <mat-label>Project</mat-label>
            <mat-select [value]="selectedProject$ | async" (selectionChange)="changeProject($event)">
              <mat-option *ngFor="let project of availableProjects" [value]="project.name">
                {{ project.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <mat-divider></mat-divider>
        <mat-nav-list>
          <a mat-list-item href="/" (click)="drawer.toggle()">Home</a>
          <a mat-list-item href="/projects" (click)="drawer.toggle()">Project management</a>
          <a mat-list-item href="/texts" (click)="drawer.toggle()">Text collection management</a>
          <a mat-list-item href="/facsimiles" (click)="drawer.toggle()">Facsimile management</a>
          <a mat-list-item href="/persons" (click)="drawer.toggle()">Index of persons management</a>
        </mat-nav-list>
        <mat-divider></mat-divider>
        <mat-nav-list>
          <a href="/" mat-list-item (click)="logout();drawer.toggle();">
            <mat-icon matListItemIcon>logout</mat-icon>
            <div matListItemTitle>Log out</div>
          </a>
        </mat-nav-list>
      </div>
    </mat-drawer>
    <mat-drawer-content>
      <div class="content">
        <ng-container *ngIf="(loading$ | async) === true">
          <div class="overlay"><mat-spinner></mat-spinner></div>
        </ng-container>
        <ng-container *ngIf="currentUrl$ | async as currentUrl">
          <ng-container *ngIf="currentUrl === '/'">
            <ng-container *ngIf="(isAuthenticated$ | async) === true">
              <home></home>
            </ng-container>
            <ng-container *ngIf="(isAuthenticated$ | async) === false">
              <login></login>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="currentUrl !== '/'">
            <router-outlet></router-outlet>
          </ng-container>
        </ng-container>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</main>
