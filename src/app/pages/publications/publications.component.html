<h1>Text collection management</h1>

  <ng-template #publicationCollections>
    <ng-container *ngIf="publicationCollections$ | async as publicationCollections">
      <div>publication collections: {{publicationCollections.length}}</div>
      <div></div>
      <table mat-table [dataSource]="publicationCollections">
        <ng-container *ngFor="let column of publicationCollectionColumnsData">
          <ng-container [matColumnDef]="column.field">
            <th mat-header-cell *matHeaderCellDef>{{ column.header }}</th>
            <td mat-cell *matCellDef="let publicationCollection">
              <ng-container *ngIf="column.field === 'id'">
                <a [routerLink]="['/publication-collections', publicationCollection.id]">{{ publicationCollection[column.field] }}</a>
              </ng-container>
              <ng-container *ngIf="column.type === 'date'">{{ publicationCollection[column.field] | customDate }}</ng-container>
              <ng-container *ngIf="column.field === 'title'">{{ publicationCollection[column.field] }}</ng-container>
              <ng-container *ngIf="column.type === 'boolean'">{{ publicationCollection[column.field] === 0 ? 'No' : 'Yes' }}</ng-container>
              <ng-container *ngIf="column.type === 'published'">
                <ng-container *ngIf="publicationCollection[column.field] === 0">Not published</ng-container>
                <ng-container *ngIf="publicationCollection[column.field] === 1">Internally</ng-container>
                <ng-container *ngIf="publicationCollection[column.field] === 2">Externally</ng-container>
              </ng-container>
              <ng-container *ngIf="column.type === 'action'">
                <button mat-icon-button><mat-icon>edit</mat-icon></button>
              </ng-container>
            </td>
          </ng-container>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="publicationCollectionDisplayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: publicationCollectionDisplayedColumns;"></tr>
      </table>
    </ng-container>
  </ng-template>

  <ng-container *ngIf="publicationCollectionId$ | async as publicationCollectionId else publicationCollections">
    <div class="publications">
      <div class="header">
        <button mat-icon-button routerLink="/publication-collections"><mat-icon>west</mat-icon></button>
      </div>

      <div class="content">
        <div>
          <ng-container *ngIf="publications$ | async as publications">

              <div>publications: {{ publications.length }}</div>
              <table mat-table [dataSource]="publications">
                <ng-container *ngFor="let column of publicationColumnsData">
                  <ng-container [matColumnDef]="column.field">
                    <th mat-header-cell *matHeaderCellDef>{{ column.header }}</th>
                    <td [ngClass]="{ 'selected': publication.id == (publicationId$ | async) }" mat-cell *matCellDef="let publication">
                      <ng-container *ngIf="column.field === 'id'">
                        <a [routerLink]="['/publication-collections/', publicationCollectionId, 'publication', publication.id]">{{ publication[column.field] }}</a>
                      </ng-container>

                      <ng-container *ngIf="column.type === 'date'">{{ publication[column.field] | customDate }}</ng-container>
                      <ng-container *ngIf="column.field === 'name'">{{ publication[column.field] }}</ng-container>
                      <ng-container *ngIf="column.type === 'boolean'">{{ publication[column.field] === 0 ? 'No' : 'Yes' }}</ng-container>
                      <ng-container *ngIf="column.type === 'published'">
                        <ng-container *ngIf="publication[column.field] === 0">Not published</ng-container>
                        <ng-container *ngIf="publication[column.field] === 1">Internally</ng-container>
                        <ng-container *ngIf="publication[column.field] === 2">Externally</ng-container>
                      </ng-container>
                      <ng-container *ngIf="column.type === 'action'">
                        <button mat-icon-button><mat-icon>edit</mat-icon></button>
                      </ng-container>
                    </td>
                  </ng-container>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="publicationDisplayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: publicationDisplayedColumns;"></tr>
              </table>
          </ng-container>
        </div>
        <div>
          <ng-container *ngIf="readingText$ | async as text">
            <h3>Reading text: </h3>
            <div>id: {{ text.id }}</div>
            <div>language: {{ text.language }}</div>
          </ng-container>
          <ng-container *ngIf="comments$ | async as comments">
            <h3>Comments: </h3>
            <div>comments: {{ comments.length }}</div>
            <ng-container *ngFor="let comment of comments">
              <div>id: {{ comment.id }}</div>
              <div>original_filename: {{ comment.original_filename }}</div>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="versions$ | async as versions">
            <h3>Versions: </h3>
            <ng-container *ngFor="let version of versions">
              <div>id: {{ version.id }}</div>
              <div>name: {{ version.name }}</div>
              <div>original_filename: {{ version.original_filename }}</div>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="manuscripts$ | async as manuscripts">
            <h3>manuscripts: </h3>
            <ng-container *ngFor="let manuscript of manuscripts.manuscripts">
              <div>id: {{ manuscript.id }}</div>
              <div>name: {{ manuscript.name }}</div>
              <div>original_filename: {{ manuscript.original_filename }}</div>
            </ng-container>

          </ng-container>
        </div>
      </div>
    </div>
  <!-- </ng-container> -->
