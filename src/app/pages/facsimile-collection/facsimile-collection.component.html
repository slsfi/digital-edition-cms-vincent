
<h1>Facsimile management</h1>
<a mat-icon-button routerLink="/facsimiles"><mat-icon>west</mat-icon></a>
<h2>Facsimile collection</h2>


<ng-container *ngIf="facsimile$ | async as facsimile">
  <h3>{{ facsimile.title }}</h3>
  <div class="pages">number of pages: {{ facsimile.number_of_pages }}</div>


    <h2>Images</h2>
    <div class="images">
      @for (page of [].constructor(facsimile.number_of_pages); track i; let i = $index) {
        <div class="image">
          <div>{{ i + 1 }}</div>
            @if (missingFileNumbers.includes(i + 1)) {
              <mat-icon class="img error">block</mat-icon>
            } @else {
              <mat-icon class="img success">check_circle</mat-icon>
            }
        </div>
      } @empty {
        <p>No pages</p>
      }
    </div>

    @if (missingFileNumbers.length) {
      <h2>Upload</h2>
      <p>
        Missing images:
        @if (missingFileNumbers.length === 1) {
          {{ missingFileNumbers[0] }}
        } @else {
          {{ missingFileNumbers[0] }} - {{ missingFileNumbers[missingFileNumbers.length -1] }}
        }

      </p>
      @if (facsimile.number_of_pages) {
        <file-upload
          [collectionId]="facsimile.id"
          [numberOfPages]="facsimile.number_of_pages"
          [missingFileNumbers]="missingFileNumbers"
          (filesUploaded)="vefifyFacsimileFiles()">
        </file-upload>
      } @else {
        <p>No pages</p>
      }
    } @else {
      <p>All images are uploaded</p>
    }


</ng-container>
